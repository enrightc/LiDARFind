{% extends "base.html" %}

{% block styles %}
<!-- Linking Leaflet CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
{% endblock %}

{% block content %}

<!-- Sidebar -->
 <!-- Adapted from: https://www.w3schools.com/w3css/tryit.asp?filename=tryw3css_sidebar_shift -->
<div class="w3-sidebar w3-bar-block w3-card w3-animate-left" style="display:none" id="mySidebar">
    <button class="w3-bar-item w3-button w3-large" onclick="w3_close()">Close &times;</button>
    <!-- Record Form -->
    <div class="w3-bar-item">
        <div id="record-form">
            <form id="create-record-form" class="col s12" method="POST" action="{{ url_for('add_record') }}">
                <!-- Title -->
                <div class="row">
                    <div class="input-field col s12">
                        <input id="title" name="title" minlength="5" maxlength="50" type="text" class="validate" required>
                        <label for="title" class="active">Title</label>
                    </div>
                </div>
                <!-- PRN -->
                <div class="row">
                    <div class="input-field col s12">
                        <input id="prn" name="prn" minlength="2" maxlength="8" type="number" class="validate">
                        <label for="prn" class="active">PRN (if known)</label>
                    </div>
                </div>
                <!-- Site Type -->
                <div class="row">
                    <div class="input-field col s12">
                        <select id="site_type" name="site_type" class="validate" required aria-label="Site Type">
                            <option value="" disabled selected>Select site type</option>
                            {% for site_type in site_types %}
                            <option value="{{ site_type.site_type }}">{{ site_type.site_type }}</option>
                            {% endfor %}
                        </select>
                        <label for="site_type" class="active">Site type</label>
                    </div>
                </div>
                <!-- Monument Type -->
                <div class="row">
                    <div class="input-field col s12">
                        <select id="monument_type" name="monument_type" class="validate" required disabled aria-label="Monument Type">
                            <option value="" disabled selected>Select monument type</option>
                        </select>
                        <label for="monument_type" class="active">Monument type</label>
                    </div>
                </div>
                <!-- Interpretation -->
                <div class="row">
                    <div class="input-field col s12">
                        <textarea id="interpretation" name="interpretation" minlength="5" maxlength="200" class="materialize-textarea" required></textarea>
                        <label for="interpretation" class="active">Interpretation</label>
                    </div>
                </div>
                <!-- Period -->
                <div class="row">
                    <div class="input-field col s12">
                        <select id="period" name="period" class="validate" required aria-label="Period">
                            <option value="" disabled selected>Select Period</option>
                            {% for period in periods %}
                            <option value="{{ period.period_name }}">{{ period.period_name }}</option>
                            {% endfor %}
                        </select>
                        <label for="period" class="active">Period</label>
                    </div>
                </div>
                <!-- Location -->
                <div class="row">
                    <div class="input-field col s12">
                        <input id="location" name="location" minlength="5" maxlength="50" type="text" class="validate" required readonly>
                        <label for="location" class="active">Click map area for coordinates</label>
                    </div>
                </div>
                <!-- Date Created -->
                <div class="row">
                    <div class="input-field col s12">
                        <input id="created_on" name="created_on" minlength="5" maxlength="50" type="text" class="validate" readonly>
                        <label for="created_on" class="active">Created on</label>
                    </div>
                </div>
                <!-- Submit Button -->
                <div class="row">
                    <div class="col s12 center-align">
                        <button type="submit" class="btn-large" aria-label="Create Record">
                            Save
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Page Content -->
<div id="main" style="margin-left:0">
    <div id=""class="w3-teal button-container">
        <button id="openNav" class="w3-button w3-teal w3-large" onclick="w3_open()">Create Record</button>
        <div class="filter-container">
            <select id="period-filter" name="period" class="validate" aria-label="Period">
                <option value=""  selected>Period</option>
                {% for period in periods %}
                <option value="{{ period.period_name }}">{{ period.period_name }}</option>
                {% endfor %}
            </select>
            <label for="period" class="active">Period</label>
            <select id="site_type_filter" name="site_type" class="validate" required aria-label="Site Type">
                <option value=""  selected>Site type</option>
                {% for site_type in site_types %}
                <option value="{{ site_type.site_type }}">{{ site_type.site_type }}</option>
                {% endfor %}
            </select>
            <label for="site_type" class="active">Site type</label>
            <select id="monument_type_filter" name="monument_type" class="validate" required aria-label="Monument Type">
                <option value=""  selected>Monument type</option>
            </select>
            <label for="monument_type" class="active">Monument type</label>
            <button id="reset-filters-btn" class="btn-large">Reset</button>
        </div>
    </div>

    <div class="row">
        <!-- Map Window -->
        <div class="col s12">
            <div id="mapid"></div>
        </div>
    </div>
    
</div>

{% endblock %}

{% block scripts %}
<!-- Leaflet -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
<script src="{{ url_for('static', filename='js/bing.js') }}"></script>
<script src="{{ url_for('static', filename='js/lidar-map.js') }}"></script>

</script>
{% endblock %}
